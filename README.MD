# ğŸ“± Flutter Mobil Ã‡eviri UygulamasÄ±

Bu proje Flutter ile geliÅŸtirilmiÅŸ karÅŸÄ±lÄ±klÄ± konuÅŸma ve Ã§eviri mobil uygulamasÄ±dÄ±r.

**âš ï¸ NOT:** Backend servisleri bu projede deÄŸil, ana web projesinde (`C:\Users\apeker\Desktop\Code\TranslatorApp`) bulunmaktadÄ±r.

## ğŸš€ HÄ±zlÄ± BaÅŸlangÄ±Ã§

### 1ï¸âƒ£ Backend Servislerini BaÅŸlat (Web Projesinden)

```bash
# Ana web projesine git
cd C:\Users\apeker\Desktop\Code\TranslatorApp\SpeechToTextToTranslate

# Backend servislerini baÅŸlat
npm run dev
```

Bu komut aÅŸaÄŸÄ±daki servisleri baÅŸlatÄ±r:
- WebSocket Sunucusu (port 8080)
- Flask Detect Language (port 5000)  
- Flask Text-to-Speech (port 5002)

### 2ï¸âƒ£ Flutter Mobil UygulamayÄ± Ã‡alÄ±ÅŸtÄ±r

```bash
# Flutter projesine git
cd flutter_translator_app

# BaÄŸÄ±mlÄ±lÄ±klarÄ± yÃ¼kle (ilk seferde)
flutter pub get

# Android Emulator'de Ã§alÄ±ÅŸtÄ±r
flutter run -d emulator-5554

# Fiziksel cihazda Ã§alÄ±ÅŸtÄ±r
flutter run
```

## âš™ï¸ IP YapÄ±landÄ±rmasÄ±

Backend servislerini baÅŸlattÄ±ÄŸÄ±nÄ±zda terminal'de Network IP adresinizi gÃ¶receksiniz:
```
âœ  Network: http://172.20.10.4:5000/
âœ  Network: http://172.20.10.4:5002/
```

Flutter app'i baÅŸlattÄ±ktan sonra **Settings ekranÄ±ndan IP'yi ayarlayÄ±n:**

### **ğŸ”§ Hangi IP'yi KullanmalÄ±yÄ±m?**

**ğŸ“± Fiziksel Android/iOS Telefon:**
- Backend baÅŸlatÄ±ldÄ±ÄŸÄ±nda gÃ¶rdÃ¼ÄŸÃ¼nÃ¼z Network IP'yi kullanÄ±n
- Ã–rnek: `172.20.10.4` (sizinki farklÄ± olabilir)
- âš ï¸ Telefon ve PC **aynÄ± Wi-Fi aÄŸÄ±nda** olmalÄ±!

**ğŸ’» Android Emulator:**
- IP: `10.0.2.2` 
- (Emulator'Ã¼n host PC'ye Ã¶zel eriÅŸim IP'si)

**ğŸŒ iOS Simulator:**
- Backend baÅŸlatÄ±ldÄ±ÄŸÄ±nda gÃ¶rdÃ¼ÄŸÃ¼nÃ¼z Network IP
- Veya `localhost` (simulator host ile aynÄ± aÄŸda)

### **ğŸ“¡ IP Adresinizi Bulma:**

**Windows:**
```bash
ipconfig
# "Wireless LAN adapter Wi-Fi" altÄ±nda "IPv4 Address" bakÄ±n
```

**Mac/Linux:**
```bash
ifconfig | grep "inet "
# veya
ip addr show
```

### **âœ… BaÄŸlantÄ±yÄ± Test Etme:**

1. Settings â†’ IP'yi gir ve "Kaydet ve Yeniden BaÄŸlan"
2. "Servis Durumu" bÃ¶lÃ¼mÃ¼nde tÃ¼m servisler **yeÅŸil** olmalÄ±
3. EÄŸer kÄ±rmÄ±zÄ± ise:
   - IP doÄŸru mu kontrol edin
   - PC firewall'u kapalÄ± mÄ± kontrol edin
   - AynÄ± aÄŸda mÄ±sÄ±nÄ±z kontrol edin

## ğŸ§ª Test SenaryolarÄ±

### **GerÃ§ek Cihaz Olmadan Test Etme:**

**YÃ¶ntem 1: Ä°ki Emulator (Ã–nerilen)**
```bash
# Terminal 1: Ä°lk emulator'Ã¼ baÅŸlat
flutter emulators --launch Pixel_3a_API_30_x86

# Terminal 2: Ä°kinci emulator'Ã¼ baÅŸlat
flutter emulators --launch Pixel_5_API_31_x86

# Terminal 3: Ä°lk emulator'e app yÃ¼kle
flutter run -d emulator-5554

# Terminal 4: Ä°kinci emulator'e app yÃ¼kle
flutter run -d emulator-5556
```


**YÃ¶ntem 2: Emulator + Web**
```bash
# Terminal 1: Emulator'de Ã§alÄ±ÅŸtÄ±r
flutter run -d emulator-5554 veya ikinici emulatÃ¶rÃ¼ aÃ§ aÅŸaÄŸÄ±da device managere bas create android emulator de fe oradan yeni emulator oluÅŸcak flutter run -d emulator-5556 gibi mesela sonra

flutter run -d emulator-5556
yaz ve onda da Ã§alÄ±ÅŸsÄ±n.

# Terminal 2: Web'de Ã§alÄ±ÅŸtÄ±r
flutter run -d chrome
```

**YÃ¶ntem 3: Web + Orijinal Web App**
```bash
# Terminal 1: Flutter Web
cd flutter_translator_app
flutter run -d chrome

# Terminal 2: Orijinal Web App
cd SpeechToTextToTranslate
npm run dev
```

### **Test AdÄ±mlarÄ±:**

1. **Backend'i baÅŸlat:** `npm run start:all`
2. **Ä°ki cihaz/emulator baÅŸlat** (yukarÄ±daki yÃ¶ntemlerden biri)
3. **Her iki cihazda:**
   - Settings â†’ IP'yi ayarla (`10.0.2.2` emulator iÃ§in)
   - "Servisleri Test Et" â†’ TÃ¼m servisler yeÅŸil olmalÄ±
   - Connection â†’ KarÅŸÄ± kullanÄ±cÄ±yÄ± gÃ¶r
4. **Birinci cihazdan:** Ä°kinci cihaza baÄŸlantÄ± isteÄŸi gÃ¶nder
5. **Ä°kinci cihazdan:** BaÄŸlantÄ± isteÄŸini kabul et
6. **Ä°ki moddan birini seÃ§:**
   - **Start Recording:** Ses kaydeder â†’ GÃ¶nderir â†’ KarÅŸÄ± taraf duyar
   - **Start Speaking:** CanlÄ± konuÅŸma tanÄ±ma â†’ Ã‡eviri â†’ Seslendirme

### **Android Emulator'de Mikrofon SimÃ¼lasyonu:**

Android Emulator'de gerÃ§ek mikrofon kullanabilirsiniz:

**YÃ¶ntem 1: PC Mikrofonunu Kullanma (Ã–nerilen)**
1. Emulator'Ã¼ baÅŸlattÄ±ÄŸÄ±nÄ±zda, Emulator penceresinin saÄŸ tarafÄ±ndaki **"..." (Extended Controls)** butonuna basÄ±n
2. **Microphone** sekmesine gidin
3. **"Virtual microphone uses host audio input"** seÃ§eneÄŸini aktif edin
4. PC'nizin mikrofonuna konuÅŸun, emulator mikrofon girdisi olarak kullanacak

**YÃ¶ntem 2: Ses DosyasÄ± Playback**
1. Extended Controls â†’ **Microphone**
2. **"Virtual microphone uses WAV file"** seÃ§in
3. HazÄ±rladÄ±ÄŸÄ±nÄ±z WAV dosyasÄ±nÄ± seÃ§in
4. Play butonuna basÄ±n

**YÃ¶ntem 3: Emulator Komut SatÄ±rÄ±**
```bash
# Emulator baÅŸlatÄ±rken mikrofon desteÄŸini aÃ§Ä±k tutun
emulator -avd <avd_name> -qemu -soundhw all
```

**Test Senaryosu:**
1. **Emulator 1:** Start Speaking â†’ PC mikrofonuna "Hello world" de
2. **Emulator 2:** Ã‡evirilen sesi duymalÄ± ("Merhaba dÃ¼nya")
3. KonuÅŸma tanÄ±ma Ã§alÄ±ÅŸmazsa: Settings â†’ Permissions â†’ Microphone izni verin

**Not:** Android emulator'de ses kaydÄ± bazen yavaÅŸ Ã§alÄ±ÅŸabilir. GerÃ§ek cihazda daha iyi performans alÄ±rsÄ±nÄ±z.

---
- [Flutter README](flutter_translator_app/README.md)
- [HÄ±zlÄ± BaÅŸlangÄ±Ã§](flutter_translator_app/QUICKSTART.md)
- [YapÄ±landÄ±rma](flutter_translator_app/CONFIGURATION.md)
- [IP YapÄ±landÄ±rmasÄ±](flutter_translator_app/IP_CONFIGURATION.md)

**Ã–zellikler:**
- âœ… TÃ¼m web Ã¶zellikleri mobilde Ã§alÄ±ÅŸÄ±yor
- âœ… WebSocket baÄŸlantÄ±sÄ±
- âœ… Ses kaydetme ve gÃ¶nderme
- âœ… GerÃ§ek zamanlÄ± konuÅŸma tanÄ±ma
- âœ… Otomatik dil algÄ±lama
- âœ… Text-to-Speech
- âœ… Modern Material Design UI
- âœ… KalÄ±cÄ± IP kaydetme (SharedPreferences)

---

2.
    1)venv\Scripts\activate
    2)C:\Users\apeker\Desktop\Code\TranslatorApp\FlaskTextToSpeech\python app.py

3.
    1)venv\Scripts\activate
    2)C:\Users\apeker\Desktop\Code\TranslatorApp\FlaskSpeakerDiarize\python app.py

4.
    1)venv\Scripts\activate
    2)C:\Users\apeker\Desktop\Code\TranslatorApp\FlaskDetectLanguage>python app.py

5.
    1)C:\Users\apeker\Desktop\Code\TranslatorApp\ConnectTsApp\ npm i
    2)C:\Users\apeker\Desktop\Code\TranslatorApp\ConnectTsApp\  npm start


    !!!!!!!!CHANCE MÄ°C projesi ni kullanmama nedenimiz SpeechTotextTranslate projesinde bu iÅŸlemi yapÄ±yoruz.

    YukarÄ±da da bahsettim!!!!!!


VEYA HEPSÄ°NÄ° TEK KOMUTTA Ã‡ALIÅTIRMAK Ä°STERSEK, start-all.js KODUNU Ã‡ALIÅTIR.

==> npm run start:all

---

## ğŸ™ï¸ UYGULAMANIN Ã‡ALIÅMA MANTIÄI

### **1. "Start Recording" Butonuna BasÄ±ldÄ±ÄŸÄ±nda:**

**AdÄ±m 1: Ses KaydÄ± (5 saniye)**
- Mikrofondan 5 saniye boyunca ses kaydÄ± alÄ±nÄ±r
- Ses MP3 formatÄ±nda kaydedilir
- Bu sÃ¼re zarfÄ±nda konuÅŸmanÄ±z dinlenir

**AdÄ±m 2: Mikrofon DeÄŸiÅŸtirilir**
- `changeMicrophone(3)` komutuyla mikrofon index **3**'e geÃ§ilir
- Port 3005'teki serverChangeMic.cjs Ã¼zerinden PowerShell komutu Ã§alÄ±ÅŸtÄ±rÄ±lÄ±r

**AdÄ±m 3: Dil Tespiti**
- Kaydedilen 5 saniyelik ses dosyasÄ± Flask API'ye gÃ¶nderilir (Port 5000)
- FlaskDetectLanguage servisi hangi dilde konuÅŸtuÄŸunuzu tespit eder
- Ã–rneÄŸin: "tr: Turkish", "en: English", "de: German" vs.
- Otomatik olarak dil seÃ§ilir (languageSelect dropdown)

**AdÄ±m 4: KonuÅŸma TanÄ±ma BaÅŸlatÄ±lÄ±r**
- Web Speech API devreye girer (`recognition1.start()`)
- SÃ¼rekli dinleme modu aktif olur (`continuous: true`)
- Her kelime anlÄ±k olarak metne Ã§evrilir
- SonuÃ§lar `result` div'inde gÃ¶sterilir

**AdÄ±m 5: Otomatik Ã‡eviri**
- TanÄ±nan metin otomatik olarak Ã§evrilir
- TÃ¼rkÃ§e â†” Ä°ngilizce veya diÄŸer diller arasÄ± Ã§eviri
- Ã‡evrilen metin `translatedResult` div'inde gÃ¶sterilir
- Google Translate Free API kullanÄ±lÄ±r

---

### **2. "Start Speaking" Butonuna BasÄ±ldÄ±ÄŸÄ±nda:**

AynÄ± iÅŸlemler gerÃ§ekleÅŸir, ancak **farklÄ± mikrofon** kullanÄ±lÄ±r:

```
startRecording()          â†’ 5 sn ses kaydÄ± + dil tespiti
listMicrophones()         â†’ Mevcut mikrofonlarÄ± listele
changeMicrophone(2)       â†’ Mikrofon index 2'ye geÃ§
recognition1.start()      â†’ KonuÅŸma tanÄ±mayÄ± baÅŸlat
```

**Fark:** 

- "Get-AudioDevice -List" Komutu ile mevcut mikrofonlar listelenir.

- EÄŸer manuel mikrofon deÄŸiÅŸtirmek istersek;

        Set-AudioDevice -Index 3

        veya

        Set-AudioDevice -Index 2 

------------------------------------------------------------------------

- `Start Recording` â†’ Mikrofon **3** kullanÄ±r ==> Sistemde Ã§alan sesleri yakalar ( Stereo Mix (Realtek(R) Audio))

Start Recording (Yerel Test):
[Butona bas] 
  â†“
textToSpeechEnabled = false â›”
  â†“
Mikrofon 3 (Stereo Mix)
  â†“
KonuÅŸma tanÄ±ma Ã§alÄ±ÅŸÄ±r âœ…
  â†“
Ã‡eviri yapÄ±lÄ±r âœ…
  â†“
Seslendirme YAPILMAZ ğŸ”‡ (karÄ±ÅŸma yok!)
------------------------------------------------------------------------

- `Start Speaking` â†’ Mikrofon **2** kullanÄ±r ==> Laptopâ€™un dahili mikrofonu yani konuÅŸmalarÄ± yakalar. (Microphone Array (IntelÂ® Smart Sound Technology for Digital Microphones))

Start Speaking (WebSocket Modu):
[Butona bas]
  â†“
textToSpeechEnabled = true âœ…
  â†“
Mikrofon 2 (Laptop Mic)
  â†“
KonuÅŸma tanÄ±ma + Ã‡eviri
  â†“
Seslendirme YAPILIR ğŸ”Š
  â†“
WebSocket ile karÅŸÄ± tarafa gÃ¶nderilir ğŸ“¡

Bu sayede farklÄ± mikrofon giriÅŸleri arasÄ±nda geÃ§iÅŸ yapabilirsiniz.

------------------------------------------------------------------------

### **3. "Stop Recording" Butonuna BasÄ±ldÄ±ÄŸÄ±nda:**

- KonuÅŸma tanÄ±ma durdurulur (`recognition1.stop()`)
- KayÄ±t durumu sÄ±fÄ±rlanÄ±r
- Butonlar tekrar aktif hale gelir

---

## ğŸ“Š UYGULAMANIN GENEL AKIÅI

```
[Butona Bas] 
    â†“
[5 saniye ses kaydÄ± al]
    â†“
[Flask API'ye gÃ¶nder â†’ Dil Tespit Et (Port 5000)]
    â†“
[Dili otomatik seÃ§]
    â†“
[Web Speech API baÅŸlat]
    â†“
[KonuÅŸ â†’ Metin oluÅŸtur â†’ Ã‡evir â†’ GÃ¶ster]
    â†“
[SÃ¼rekli dinle (continuous mode)]
```

---

## ğŸ”§ KULLANILAN SERVÄ°SLER VE PORTLAR:

1. **Ana Uygulama (Port 3000):** Vite + React - KullanÄ±cÄ± arayÃ¼zÃ¼
2. **Mikrofon DeÄŸiÅŸtirme (Port 3005):** serverChangeMic.cjs - PowerShell komutlarÄ±yla mikrofon kontrolÃ¼
3. **Dil Tespiti (Port 5000):** FlaskDetectLanguage - Ses dosyasÄ±ndan dil tespiti
4. **Text-to-Speech (Port 5002):** FlaskTextToSpeech - Metni sese Ã§evirme
5. **Speaker Diarization (Port 5001):** FlaskSpeakerDiarize - KonuÅŸmacÄ± ayrÄ±ÅŸtÄ±rma
6. **WebSocket Sunucusu (Port 8080):** ConnectTsApp - KullanÄ±cÄ±lar arasÄ± baÄŸlantÄ±

---

## ğŸ¯ Ã–ZELLÄ°KLER:

- âœ… Otomatik dil tespiti (ilk 5 saniyede)
- âœ… GerÃ§ek zamanlÄ± konuÅŸma tanÄ±ma
- âœ… AnlÄ±k Ã§eviri (Ã§ok dilli destek)
- âœ… Ã‡oklu mikrofon desteÄŸi
- âœ… KonuÅŸmacÄ± ayrÄ±ÅŸtÄ±rma (diarization)
- âœ… Text-to-Speech dÃ¶nÃ¼ÅŸÃ¼m
- âœ… WebSocket ile Ã§ok kullanÄ±cÄ±lÄ± iletiÅŸim

---

## ğŸŒ AYNI WiFi AÄINDAN BAÅKA CÄ°HAZDAN BAÄLANMA

### **Sunucu Bilgisayarda (192.168.68.64):**

1. TÃ¼m servisleri Ã§alÄ±ÅŸtÄ±r:
   ```bash
   npm run start:all
   ```

2. Windows GÃ¼venlik DuvarÄ± ayarlarÄ±:
   - **Windows GÃ¼venlik** â†’ **GÃ¼venlik DuvarÄ± ve aÄŸ korumasÄ±** â†’ **GeliÅŸmiÅŸ ayarlar**
   - **Gelen Kurallar** â†’ **Yeni Kural** â†’ **BaÄŸlantÄ± noktasÄ±**
   - **TCP** seÃ§ ve ÅŸu portlarÄ± ekle: `3000, 8080, 5002, 5000, 3005`
   - **BaÄŸlantÄ±ya izin ver** â†’ Ä°sim ver: "TranslatorApp"

### **DiÄŸer Cihazdan:**

TarayÄ±cÄ±da ÅŸu adrese git:
```
http://192.168.68.64:3000
```

**NOT:** TÃ¼m servisler (WebSocket, TTS, Detect Language, Mic Change) sunucu bilgisayarda Ã§alÄ±ÅŸmalÄ±. DiÄŸer cihazda sadece tarayÄ±cÄ± yeterli.

---

## âš ï¸ Ã–NEMLÄ°: MÄ°KROFON SEÃ‡Ä°MÄ° HAKKINDA

### **Sunucu Bilgisayarda (192.168.68.64):**
- Mikrofon deÄŸiÅŸtirme **Ã§alÄ±ÅŸÄ±r** (PowerShell + AudioDeviceCmdlets)
- Start Recording â†’ Mikrofon 3 (Stereo Mix - sistem sesleri)
- Start Speaking â†’ Mikrofon 2 (Microphone Array - fiziksel mikrofon)

### **Mobil/Tablet/DiÄŸer Bilgisayarlarda:**
- Mikrofon deÄŸiÅŸtirme servisi **eriÅŸilemez** (192.168.68.64:3005 Ã§alÄ±ÅŸmaz)
- Uygulama **hata vermeden devam eder**
- **VarsayÄ±lan mikrofon** kullanÄ±lÄ±r (cihazÄ±n ana mikrofonu)
- Stereo Mix konsepti mobilde yoktur
- Her iki buton da (Start Recording/Speaking) aynÄ± mikrofonu kullanÄ±r

**Ã‡Ã¶zÃ¼m:** 
- Remote cihazlardan sadece **Start Speaking** kullanÄ±n
- Mikrofon deÄŸiÅŸtirme uyarÄ±sÄ± gÃ¶z ardÄ± edilebilir
- Mobil cihazlar default mikrofonla sorunsuz Ã§alÄ±ÅŸÄ±r

---
